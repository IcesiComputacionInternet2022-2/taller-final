<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Create User</title>
  <meta th:name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<script th:src="@{${'//cdn.jsdelivr.net/npm/sweetalert2@11'}}"></script>
<br>
<h1 th:align="center">Sign up</h1>
<div th:class="'body-wrapper'">
  <section th:class="'d-flex justify-content-center align-items-center bg'">
    <div th:class="'d-flex flex-columns p-3'">
      <form th:action="@{/register}" th:object="${userDTO}" th:method="post">
        <div th:class="'form-group p-2'">
          <label for="inputEmail">Email:</label>
          <input th:type="email" th:class="'form-control'" id="inputEmail" th:aria-describedby="emailHelp" th:placeholder="'Enter an email'" th:field="*{email}"/>
          <small th:id="emailHelp" th:class="'text-muted'">
            The email must begin with alphanumeric characters (no special characters) followed by the @icesi.edu.co domain.
          </small>
        </div>
        <div th:class="'form-group p-2'">
          <label for="inputPassword">Password:</label>
          <input th:type="password" th:class="'form-control'" id="inputPassword" th:aria-describedby="passwordHelp" th:placeholder="'Enter a password'" th:field="*{password}" required />
          <small th:id="passwordHelp" th:class="'text-muted'">
            Passwords must have at least 1 upper case letter, 1 lower case letter, a number and a symbol like #$%@
          </small>
        </div>
        <div th:class="'form-group p-2'">
          <label for="inputAddress">Address:</label>
          <input th:type="text" th:class="'form-control'" id="inputAddress" th:placeholder="'Enter an address'" th:field="*{address}"/>
        </div>
        <div th:class="'form-group p-2'">
          <label for="inputPhoneNumber">Phone Number:</label>
          <input th:type="text" th:class="'form-control'" id="inputPhoneNumber" th:aria-describedby="phoneNumberHelp" th:placeholder="'Enter a phone number'" th:field="*{phoneNumber}"/>
          <small th:id="phoneNumberHelp" th:class="'text-muted'">
            The phone number must begin with the +57 prefix followed by 10 digits, and mustn't have whitespaces.
          </small>
        </div>
        <div th:class="'form-group p-2'" th:align="center">
          <button th:type="submit" th:class="'btn btn-primary'">Register</button>
          <button th:type="reset" th:onclick="|window.location.href='/signUp'|" th:class="'btn btn-primary'">Reset</button>
          <button th:type="reset" th:onclick="|window.location.href='/signIn'|" th:class="'btn btn-primary'">Sign in</button>
        </div>
      </form>
    </div>
  </section>
</div>
<script>
  function showAlert(button, status, message) {
    Swal.fire({
      position: 'center',
      icon: status,
      title: message,
      confirmButtonText: button
    });
  }
</script>
<span th:if="${userResponse != null}">
  <script th:if="${userResponse == true}" th:inline="javascript">
    showAlert('OK', 'success', 'User sucesssfully created!');
  </script>
  <script th:if="${userResponse == false}" th:inline="javascript">
    showAlert('Retry', 'error', /*[[${message}]]*/);
  </script>
</span>
</body>
</html>